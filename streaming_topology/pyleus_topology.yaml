# Behavior Streaming Topology
# Author:    Woodie
# UpdatedAt: Fri, 9 Oct, 2015	
# 
name: streaming_topology

topology:
    - spout:
        name: user_behavior_spout
        module: streaming_topology.user_behavior_spout

    - bolt:
        name: statistic_bolt
        module: streaming_topology.statistic_bolt
        tick_freq_secs: 30.0
        groupings:
            - fields_grouping:
                component: user_behavior_spout
                fields:
                    - userId
                    - type

    - bolt:
        name: feature_bolt
        module: streaming_topology.feature_bolt
        groupings:
            - fields_grouping:
                component: statistic_bolt
                fields:
                    - userId

    - bolt:
        name: event_bolt
        module: streaming_topology.event_bolt
        groupings:
            - fields_grouping:
                component: feature_bolt
                fields:
                    - userId